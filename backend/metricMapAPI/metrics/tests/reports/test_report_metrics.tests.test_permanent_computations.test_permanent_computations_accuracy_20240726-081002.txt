Test Run: metrics.tests.test_permanent_computations.test_permanent_computations_accuracy
Ran 4 tests in 21.490 seconds

Creating test database for alias 'default'...
=== Starting migration
Operations to perform:
  Apply all migrations: admin, auth, authtoken, contenttypes, metrics, sessions
Running migrations:
  Applying contenttypes.0001_initial...
 OK
  Applying auth.0001_initial...
 OK
  Applying admin.0001_initial...
 OK
  Applying admin.0002_logentry_remove_auto_add...
 OK
  Applying admin.0003_logentry_add_action_flag_choices...
 OK
  Applying contenttypes.0002_remove_content_type_name...
 OK
  Applying auth.0002_alter_permission_name_max_length...
 OK
  Applying auth.0003_alter_user_email_max_length...
 OK
  Applying auth.0004_alter_user_username_opts...
 OK
  Applying auth.0005_alter_user_last_login_null...
 OK
  Applying auth.0006_require_contenttypes_0002...
 OK
  Applying auth.0007_alter_validators_add_error_messages...
 OK
  Applying auth.0008_alter_user_username_max_length...
 OK
  Applying auth.0009_alter_user_last_name_max_length...
 OK
  Applying auth.0010_alter_group_name_max_length...
 OK
  Applying auth.0011_update_proxy_permissions...
 OK
  Applying auth.0012_alter_user_first_name_max_length...
 OK
  Applying authtoken.0001_initial...
 OK
  Applying authtoken.0002_auto_20160226_1747...
 OK
  Applying authtoken.0003_tokenproxy...
 OK
  Applying authtoken.0004_alter_tokenproxy_options...
 OK
  Applying metrics.0001_initial...
 OK
  Applying metrics.0002_alter_actionremark_tenant_alter_anomaly_tenant_and_more...
 OK
  Applying metrics.0003_alter_actionremark_date_alter_anomaly_detection_date_and_more...
 OK
  Applying metrics.0004_remove_connection_metrics_con_from_me_9411ea_idx_and_more...
 OK
  Applying metrics.0005_remove_connection_project_metric_project_and_more...
 OK
  Applying metrics.0006_correlation_customuser_dataqualityscore_and_more...
 OK
  Applying metrics.0007_connection_strength_forecast_lower_bound_and_more...
 OK
  Applying metrics.0008_dataqualityscore_metric_dataqualityscore_project_and_more...
 OK
  Applying metrics.0009_alter_metric_unique_together...
 OK
  Applying metrics.0010_movingaverage_tenant_networkanalysisresult_tenant_and_more...
 OK
  Applying sessions.0001_initial...
 OK
E=== Starting migration
Operations to perform:
  Apply all migrations: admin, auth, authtoken, contenttypes, metrics, sessions
Running migrations:
  Applying contenttypes.0001_initial...
 OK
  Applying auth.0001_initial...
 OK
  Applying admin.0001_initial...
 OK
  Applying admin.0002_logentry_remove_auto_add...
 OK
  Applying admin.0003_logentry_add_action_flag_choices...
 OK
  Applying contenttypes.0002_remove_content_type_name...
 OK
  Applying auth.0002_alter_permission_name_max_length...
 OK
  Applying auth.0003_alter_user_email_max_length...
 OK
  Applying auth.0004_alter_user_username_opts...
 OK
  Applying auth.0005_alter_user_last_login_null...
 OK
  Applying auth.0006_require_contenttypes_0002...
 OK
  Applying auth.0007_alter_validators_add_error_messages...
 OK
  Applying auth.0008_alter_user_username_max_length...
 OK
  Applying auth.0009_alter_user_last_name_max_length...
 OK
  Applying auth.0010_alter_group_name_max_length...
 OK
  Applying auth.0011_update_proxy_permissions...
 OK
  Applying auth.0012_alter_user_first_name_max_length...
 OK
  Applying authtoken.0001_initial...
 OK
  Applying authtoken.0002_auto_20160226_1747...
 OK
  Applying authtoken.0003_tokenproxy...
 OK
  Applying authtoken.0004_alter_tokenproxy_options...
 OK
  Applying metrics.0001_initial...
 OK
  Applying metrics.0002_alter_actionremark_tenant_alter_anomaly_tenant_and_more...
 OK
  Applying metrics.0003_alter_actionremark_date_alter_anomaly_detection_date_and_more...
 OK
  Applying metrics.0004_remove_connection_metrics_con_from_me_9411ea_idx_and_more...
 OK
  Applying metrics.0005_remove_connection_project_metric_project_and_more...
 OK
  Applying metrics.0006_correlation_customuser_dataqualityscore_and_more...
 OK
  Applying metrics.0007_connection_strength_forecast_lower_bound_and_more...
 OK
  Applying metrics.0008_dataqualityscore_metric_dataqualityscore_project_and_more...
 OK
  Applying metrics.0009_alter_metric_unique_together...
 OK
  Applying metrics.0010_movingaverage_tenant_networkanalysisresult_tenant_and_more...
 OK
  Applying sessions.0001_initial...
 OK
/home/nadeemramli/.pyenv/versions/3.10.7/lib/python3.10/site-packages/statsmodels/tsa/base/tsa_model.py:473: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)
/home/nadeemramli/.pyenv/versions/3.10.7/lib/python3.10/site-packages/statsmodels/tsa/base/tsa_model.py:473: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)
.=== Starting migration
Operations to perform:
  Apply all migrations: admin, auth, authtoken, contenttypes, metrics, sessions
Running migrations:
  Applying contenttypes.0001_initial...
 OK
  Applying auth.0001_initial...
 OK
  Applying admin.0001_initial...
 OK
  Applying admin.0002_logentry_remove_auto_add...
 OK
  Applying admin.0003_logentry_add_action_flag_choices...
 OK
  Applying contenttypes.0002_remove_content_type_name...
 OK
  Applying auth.0002_alter_permission_name_max_length...
 OK
  Applying auth.0003_alter_user_email_max_length...
 OK
  Applying auth.0004_alter_user_username_opts...
 OK
  Applying auth.0005_alter_user_last_login_null...
 OK
  Applying auth.0006_require_contenttypes_0002...
 OK
  Applying auth.0007_alter_validators_add_error_messages...
 OK
  Applying auth.0008_alter_user_username_max_length...
 OK
  Applying auth.0009_alter_user_last_name_max_length...
 OK
  Applying auth.0010_alter_group_name_max_length...
 OK
  Applying auth.0011_update_proxy_permissions...
 OK
  Applying auth.0012_alter_user_first_name_max_length...
 OK
  Applying authtoken.0001_initial...
 OK
  Applying authtoken.0002_auto_20160226_1747...
 OK
  Applying authtoken.0003_tokenproxy...
 OK
  Applying authtoken.0004_alter_tokenproxy_options...
 OK
  Applying metrics.0001_initial...
 OK
  Applying metrics.0002_alter_actionremark_tenant_alter_anomaly_tenant_and_more...
 OK
  Applying metrics.0003_alter_actionremark_date_alter_anomaly_detection_date_and_more...
 OK
  Applying metrics.0004_remove_connection_metrics_con_from_me_9411ea_idx_and_more...
 OK
  Applying metrics.0005_remove_connection_project_metric_project_and_more...
 OK
  Applying metrics.0006_correlation_customuser_dataqualityscore_and_more...
 OK
  Applying metrics.0007_connection_strength_forecast_lower_bound_and_more...
 OK
  Applying metrics.0008_dataqualityscore_metric_dataqualityscore_project_and_more...
 OK
  Applying metrics.0009_alter_metric_unique_together...
 OK
  Applying metrics.0010_movingaverage_tenant_networkanalysisresult_tenant_and_more...
 OK
  Applying sessions.0001_initial...
 OK
.=== Starting migration
Operations to perform:
  Apply all migrations: admin, auth, authtoken, contenttypes, metrics, sessions
Running migrations:
  Applying contenttypes.0001_initial...
 OK
  Applying auth.0001_initial...
 OK
  Applying admin.0001_initial...
 OK
  Applying admin.0002_logentry_remove_auto_add...
 OK
  Applying admin.0003_logentry_add_action_flag_choices...
 OK
  Applying contenttypes.0002_remove_content_type_name...
 OK
  Applying auth.0002_alter_permission_name_max_length...
 OK
  Applying auth.0003_alter_user_email_max_length...
 OK
  Applying auth.0004_alter_user_username_opts...
 OK
  Applying auth.0005_alter_user_last_login_null...
 OK
  Applying auth.0006_require_contenttypes_0002...
 OK
  Applying auth.0007_alter_validators_add_error_messages...
 OK
  Applying auth.0008_alter_user_username_max_length...
 OK
  Applying auth.0009_alter_user_last_name_max_length...
 OK
  Applying auth.0010_alter_group_name_max_length...
 OK
  Applying auth.0011_update_proxy_permissions...
 OK
  Applying auth.0012_alter_user_first_name_max_length...
 OK
  Applying authtoken.0001_initial...
 OK
  Applying authtoken.0002_auto_20160226_1747...
 OK
  Applying authtoken.0003_tokenproxy...
 OK
  Applying authtoken.0004_alter_tokenproxy_options...
 OK
  Applying metrics.0001_initial...
 OK
  Applying metrics.0002_alter_actionremark_tenant_alter_anomaly_tenant_and_more...
 OK
  Applying metrics.0003_alter_actionremark_date_alter_anomaly_detection_date_and_more...
 OK
  Applying metrics.0004_remove_connection_metrics_con_from_me_9411ea_idx_and_more...
 OK
  Applying metrics.0005_remove_connection_project_metric_project_and_more...
 OK
  Applying metrics.0006_correlation_customuser_dataqualityscore_and_more...
 OK
  Applying metrics.0007_connection_strength_forecast_lower_bound_and_more...
 OK
  Applying metrics.0008_dataqualityscore_metric_dataqualityscore_project_and_more...
 OK
  Applying metrics.0009_alter_metric_unique_together...
 OK
  Applying metrics.0010_movingaverage_tenant_networkanalysisresult_tenant_and_more...
 OK
  Applying sessions.0001_initial...
 OK
.
======================================================================
ERROR: test_anomaly_detection_accuracy (metrics.tests.test_permanent_computations.test_permanent_computations_accuracy.TestPermanentComputationsAccuracy)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/nadeemramli/workspace/github.com/nadeemramli/mapping-of-metrics/metric-map-app/backend/metricMapAPI/metrics/tests/test_permanent_computations/test_permanent_computations_accuracy.py", line 127, in test_anomaly_detection_accuracy
    z_score = (self.pc.df.loc[date, 'value'] - self.pc.df['value'].mean()) / self.pc.df['value'].std()
  File "/home/nadeemramli/.pyenv/versions/3.10.7/lib/python3.10/site-packages/pandas/core/indexing.py", line 1183, in __getitem__
    return self.obj._get_value(*key, takeable=self._takeable)
  File "/home/nadeemramli/.pyenv/versions/3.10.7/lib/python3.10/site-packages/pandas/core/frame.py", line 4221, in _get_value
    row = self.index.get_loc(index)
  File "/home/nadeemramli/.pyenv/versions/3.10.7/lib/python3.10/site-packages/pandas/core/indexes/datetimes.py", line 627, in get_loc
    raise KeyError(key)
KeyError: datetime.date(2023, 9, 15)

----------------------------------------------------------------------
Ran 4 tests in 21.490s

FAILED (errors=1)

Test Result: Failure
Errors: 1
Failures: 0
